================================================================================
实验10 - 单周期处理器综合应用设计 - 修改总结
EXPERIMENT 10 - SINGLE CYCLE PROCESSOR COMPREHENSIVE APPLICATION - CHANGES
================================================================================

修改的文件 (Modified Files):
================================================================================

1. sy10git.srcs/sources_1/new/top.v
   ├─ 添加 16 位拨码开关输入端口: switch_value[15:0]
   ├─ 添加外设数据线: readdata_mem
   └─ 添加地址译码器: dataadr[14]判断访问内存还是外设

2. sy10git.srcs/sources_1/new/alu.v
   ├─ 扩展控制信号: op[2:0] → op[3:0]
   ├─ 添加 SLLV 操作: 4'b1000 (b << a[4:0])
   └─ 添加 SRLV 操作: 4'b1001 (b >> a[4:0])

3. sy10git.srcs/sources_1/new/aludec.v
   ├─ 扩展输出信号: alucontrol[2:0] → alucontrol[3:0]
   ├─ 添加 SLLV 译码: funct=6'b000100 → alucontrol=4'b1000
   └─ 添加 SRLV 译码: funct=6'b000110 → alucontrol=4'b1001

4. sy10git.srcs/sources_1/new/controller.v
   └─ 扩展信号宽度: alucontrol[2:0] → alucontrol[3:0]

5. sy10git.srcs/sources_1/new/datapath.v
   └─ 扩展信号宽度: alucontrol[2:0] → alucontrol[3:0]

6. sy10git.srcs/sources_1/new/mips.v
   └─ 扩展信号宽度: alucontrol[2:0] → alucontrol[3:0]

7. sy10git.srcs/sim_1/new/testbench.v
   ├─ 添加仿真输入: sw_dbg[4:0], switch_value[15:0]
   └─ 添加仿真输出: ans[3:0], seg[6:0]

================================================================================
新增的文件 (New Files):
================================================================================

1. EXPERIMENT10_README.md
   └─ 英文文档：完整的实验说明、使用方法和示例

2. 实验10说明.md
   └─ 中文文档：详细的实现说明、测试用例和验证步骤

3. IMPLEMENTATION_SUMMARY.md
   └─ 实现总结：所有修改的汇总和验证清单

4. /tmp/experiment10/test_switch.asm
   └─ 汇编程序：简单的拨码开关读取测试

5. /tmp/experiment10/test_shifts.asm
   └─ 汇编程序：SLLV和SRLV指令测试

6. /tmp/experiment10/calculator.asm
   └─ 汇编程序：完整的计算器实现

7. /tmp/experiment10/test_switch.coe
   └─ COE文件：拨码开关测试的机器码

8. /tmp/experiment10/test_shifts.coe
   └─ COE文件：移位指令测试的机器码

================================================================================
新增的指令 (New Instructions):
================================================================================

SLLV - Shift Left Logical Variable (变量逻辑左移)
─────────────────────────────────────────────────
  汇编格式: sllv $rd, $rt, $rs
  机器码:   000000_rs[4:0]_rt[4:0]_rd[4:0]_00000_000100
  功能:     $rd = $rt << $rs[4:0]
  示例:     sllv $5, $1, $2  # $5 = $1 << $2

SRLV - Shift Right Logical Variable (变量逻辑右移)
──────────────────────────────────────────────────
  汇编格式: srlv $rd, $rt, $rs
  机器码:   000000_rs[4:0]_rt[4:0]_rd[4:0]_00000_000110
  功能:     $rd = $rt >> $rs[4:0]
  示例:     srlv $6, $3, $4  # $6 = $3 >> $4

================================================================================
内存映射 (Memory Map):
================================================================================

地址范围              | 功能说明
─────────────────────|──────────────────────────
0x0000 - 0x3FFF      | 数据存储器 (Data Memory)
0x4000               | 拨码开关外设 (Switch Peripheral)
0x4001 - 0xFFFFFFFF  | 保留 (Reserved)

================================================================================
计算器功能定义 (Calculator Function Definition):
================================================================================

拨码开关位 [15:14] - 运算功能位:
  00 = 加法 (Addition)      - 使用 add 指令
  01 = 减法 (Subtraction)   - 使用 sub 指令
  10 = 乘法 (Multiplication) - 使用重复加法实现
  11 = 除法 (Division)       - 使用重复减法实现

拨码开关位 [13:7] - 操作数 A (Operand A): 7位无符号数 (0-127)
拨码开关位 [6:0]  - 操作数 B (Operand B): 7位无符号数 (0-127)

结果寄存器:
  $4 = 运算结果
  $8 = 运算结果副本 (方便调试)

================================================================================
测试示例 (Test Examples):
================================================================================

示例 1: 计算 5 + 3
─────────────────
  拨码开关设置: 0x00A3 (00_0000101_0000011)
  预期结果: $4 = $8 = 8

示例 2: 计算 10 - 4
──────────────────
  拨码开关设置: 0x4284 (01_0001010_0000100)
  预期结果: $4 = $8 = 6

示例 3: 计算 6 * 7
─────────────────
  拨码开关设置: 0x8307 (10_0000110_0000111)
  预期结果: $4 = $8 = 42

示例 4: 计算 20 / 4
──────────────────
  拨码开关设置: 0xCA04 (11_0010100_0000100)
  预期结果: $4 = $8 = 5

================================================================================
调试功能 (Debug Features):
================================================================================

寄存器调试接口 (已在实验9中实现):
  输入: ra_dbg[4:0]    - 连接到5个按钮，选择要查看的寄存器 (0-31)
  输出: rd_dbg[31:0]   - 连接到七段数码管，显示寄存器的值

使用方法:
  1. 通过按钮组合选择寄存器编号 (0-31)
  2. 七段数码管显示该寄存器的低16位值
  3. 可以实时查看程序运行时各寄存器的状态

================================================================================
上板验证步骤 (FPGA Verification Steps):
================================================================================

1. 准备工作
   ├─ 在Vivado中打开项目
   ├─ 确认所有源文件已更新
   └─ 选择要测试的程序，更新imem的COE文件

2. 生成比特流
   ├─ Run Synthesis
   ├─ Run Implementation
   └─ Generate Bitstream

3. 下载到板子
   ├─ 连接Basys3开发板
   └─ Program Device

4. 测试拨码开关读取
   ├─ 使用 test_switch.coe
   ├─ 拨动拨码开关
   ├─ 按按钮选择寄存器$1
   └─ 在七段数码管上查看值是否正确

5. 测试计算器
   ├─ 加载计算器程序
   ├─ 设置拨码开关进行不同运算
   ├─ 按按钮选择寄存器$4或$8
   └─ 验证七段数码管显示的结果

================================================================================
完成情况 (Completion Status):
================================================================================

✅ 外设I/O支持 (Peripheral I/O Support)
✅ SLLV指令实现 (SLLV Instruction Implementation)
✅ SRLV指令实现 (SRLV Instruction Implementation)
✅ 寄存器调试接口 (Register Debug Interface)
✅ 测试程序编写 (Test Programs)
✅ COE文件生成 (COE Files)
✅ 文档完善 (Documentation)
✅ 仿真环境更新 (Testbench Update)

所有实验10要求已完成！(All Experiment 10 requirements completed!)

================================================================================
